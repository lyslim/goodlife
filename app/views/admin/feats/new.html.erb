<div class="row">
  <div class="column grid_10">
    <h1>New Feat</h1>
    <p><a href="/admin/feats">&laquo; Back to Feat List</a></p>
    <%= form_for @feat, :url => {:action => "create"}, :html => { :multipart => true } do |f| %>
      <p>
        <%= f.label "Name" %><br/>
        <%= f.text_field :name %>
      </p>
      <p>
        <%= f.label "Feat Tags" %><br/>
        <%= f.text_field :tag_tokens %>
      </p>
      <p>
        <%= f.label "Why" %><br/>
        <%= f.text_area :why, :size => "80x10", :id => "kindeditor" %>
      </p>
      <p>
        <%= f.label "How" %><br/>
        <%= f.text_area :how, :size => "80x10", :id => "kindeditor1" %>
      </p>
      <p>
        <%= f.label "Points" %><br/>
        <%= f.text_field :bonus_points %>
      </p>
      <div class="newPaperclipFiles">
        <%= f.fields_for :image do |builder| %>
          <p>
            <%= builder.label "Add A Photo" %>
            <%= builder.file_field :upload, :onchange => "javascript: change_image();", :id=>"myfile'" %>
          </p>
        <% end %>
      </div>
      <div id="imagepreview"><img id="pic" border="2" src=""></div>
      <p><%= f.submit %></p>
    <% end %>
  </div>
  <%# render :partial => 'crud_right' %>
</div>
<script type="text/javascript">
  // Disable Form Submission on Enter Key Press
  $('*').keypress(function(e){
      if (e.keyCode == 13){
          return false;
      }
  });

function change_image() {
    alert("this is test");
    img = document.getElementById("pic");
    fileinput = document.input.File;
    if (img && fileinput) {
        img.src = fileinput.files[0].getAsDataURL();
    }
    alert(img.src);
}
</script>
